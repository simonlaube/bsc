% !TEX root = ../Thesis.tex
\chapter{Conclusion}
In this thesis the goal was to find ways of improving the resource management and thus reduce storage and energy usage as much as possible while still having a system that lets us create a reliable network consisting of autonomous devices. TinySSB was used as a starting point and a resource manager was built on top to orchestrate the activity of TinySSB. While most functionalities of Micropython worked without any problems on the Pycom 4 devices, the pure25519 verifying algorithm - which is an essential part of the project to guarantee integrity and authenticity - initially did not work. After changing a modulo operation we managed to get it working and were able to start testing the network. However verifying one packet still takes a couple of seconds and also quite a bit of computing power. A native implementation in C of this algorithm that can be called with Micropython would probably be a huge improvement in terms of energy consumption. A frequent problem that was occurring were stack overflows. Due to the limited memory capabilities of the Pycom 4 devices a node can quickly overflow its memory. We first tried to verify incoming packets simultaneously in different threads however had to abandon this idea because of said stack overflows. By reducing the use of threads as much as possible, we were able to reduce the stack overflows. Replicating normal feeds or session trees now works without any issues. However for the fork trees stack overflows on the receiver device can still occasionally occur. We could not find a solution for this problem. \\
To reduce the storage size, we first tried to add packet types containing delete or modify commands that a user could manually append to a feed and with it remove or change older feeds. However we quickly realized, that this method would be very complicated and not generic enough to easily be replicable in different situations. The introduction of feed structures that handle storage management automatically was therefore a better suited path to take for our situation. The trees is the current state disregard unused feeds or packets. Deleting a feed only deletes it from memory but not from the device storage. While the construction of feed trees on the producer side was rather simple to implement, complications started once we tried to replicate them in the network. A lot of unexpected situations occurred because the structure on the receiver node is not at all times a complete tree and we do not know which feed will receive the next packet. We had to account for that and find solutions to cope with those problems. The use of a central DMX table where entries are assigned to categories helped a lot in this regard. It let us update the DMX values for a specific tree without affecting any other feeds on the node and thus could reduced errors in the code. \\
While there are still a lot improvements that can be made to the system [ADD REF], in its current state a functioning network can be deployed.

\section{Future Work}
A lot of settings can be tweaked to optimize the packet requesting. In the session tree for example, feeds on a higher layer or the root feed could be given higher priority. If the priority is too high, a lot of unanswered want requests will be sent. If it is too low, it can take a long time until the tree finally adds a new pointer layer. Maybe dynamically changing priorities can be something that could be looked at. For example if a new packet was appended to the root feed, increase the root feed's priority until the request is unsuccessful. Further session trees may be optimized by changing the number of pointer packets per pointer feed or having only a pointer to a session feed every $x$ feeds. This could reduce the number of pointers while still having a sliding window. \\
Obviously the deletion of feeds from storage must be implemented to be able to let a device run over a long period of time. \\
Further testing a system with more nodes over a long period of time could potentially point to some bugs that have to be fixed before a reliable network can be deployed. And finally connecting it to a solar panel and deploying it outdoors will truly demonstrate that the concept of the system works. \\